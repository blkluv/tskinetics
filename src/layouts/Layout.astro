---
import "../styles/globals.css";
import { siteAssets } from "../lib/gumroad";

export interface Props {
    title?: string;
    description?: string;
    image?: string;
}

const { 
    title = "TSK Sound Kits",
    description = "Premium sound kits and samples for music producers",
    image = "/images/og-default.jpg"
} = Astro.props;

// Get current page path for active navigation state
const currentPath = Astro.url.pathname;

// Function to check if current page matches the link
const isActivePage = (page: string) => {
  if (currentPath === "/" && page === "home") return true;
  if (currentPath === "/popular" && page === "popular") return true;
  if (currentPath === "/new-releases" && page === "new-releases") return true;
  if (currentPath === "/products" && page === "products") return true;
  if (currentPath === "/blog" && page === "blog") return true;
  if (currentPath?.startsWith("/blog/") && page === "blog") return true;
  if (currentPath === "/free-kit-300" && page === "free-kit") return true;
  if (currentPath === "/contact" && page === "contact") return true;
  return false;
};

// Active link classes
const activeLinkClass = "text-white border-b border-white";
const inactiveLinkClass = "text-gray-300 hover:text-white transition-colors";
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content={description} />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <title>{title}</title>
        
        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content={Astro.url.href} />
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content={new URL(image, Astro.url).href} />
        
        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content={Astro.url.href} />
        <meta property="twitter:title" content={title} />
        <meta property="twitter:description" content={description} />
        <meta property="twitter:image" content={new URL(image, Astro.url).href} />
        
        <!-- Canonical URL -->
        <link rel="canonical" href={Astro.url.href} />
    </head>
    <body class="bg-[#151515] text-white">
        <!-- Navigation Header -->
        <header
            class="fixed top-0 left-0 right-0 z-50 bg-[#151515]/90 backdrop-blur-sm border-b border-gray-800"
        >
            <div
                class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between"
            >
                <!-- TSK Logo -->
                <div class="flex items-center">
                    <div class="h-12">
                        <img
                            src={siteAssets.logos.tskMain}
                            alt="TSK Logo"
                            class="h-full w-auto object-contain"
                        />
                    </div>
                </div>

                <!-- Navigation Menu -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a
                        href="/"
                        class={isActivePage("home") ? activeLinkClass : inactiveLinkClass}
                        >HOME</a
                    >
                    <a
                        href="/products"
                        class={isActivePage("products") ? activeLinkClass : inactiveLinkClass}
                        >PRODUCTS</a
                    >
                    <a
                        href="/popular"
                        class={isActivePage("popular") ? activeLinkClass : inactiveLinkClass}
                        >POPULAR</a
                    >
                    <a
                        href="/new-releases"
                        class={isActivePage("new-releases") ? activeLinkClass : inactiveLinkClass}
                        >NEW RELEASES</a
                    >
                    <a
                        href="/blog"
                        class={isActivePage("blog") ? activeLinkClass : inactiveLinkClass}
                        >BLOG</a
                    >
                    <div class="relative group">
                        <button
                            class="text-white hover:text-gray-300 transition-colors flex items-center"
                        >
                            CATEGORIES
                            <svg
                                class="w-4 h-4 ml-1 transition-transform group-hover:rotate-180"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </button>
                        
                        <!-- Dropdown Menu -->
                        <div class="absolute left-0 mt-2 w-48 bg-[#1a1a1a] border border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="py-2">
                                <a href="/products" class="block px-4 py-2 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors">
                                    ALL PRODUCTS
                                </a>
                                <a href="/categories/one-shots" class="block px-4 py-2 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors">
                                    ONE SHOTS
                                </a>
                                <a href="/categories/drum-kits" class="block px-4 py-2 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors">
                                    DRUM KITS
                                </a>
                                <a href="/categories/presets" class="block px-4 py-2 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors">
                                    PRESETS
                                </a>
                                <a href="/categories/midi" class="block px-4 py-2 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors">
                                    MIDI
                                </a>
                            </div>
                        </div>
                    </div>
                    <a
                        href="/free-kit-300"
                        class="text-white hover:text-gray-300 transition-colors"
                        >FREE KIT 300+</a
                    >
                    <a
                        href="/contact"
                        class="text-white hover:text-gray-300 transition-colors"
                        >CONTACT</a
                    >
                </nav>

            </div>
        </header>

        <!-- Scrolling Banner -->
        <div class="marquee-bar mt-20">
            <div class="marquee-content">
                <span class="marquee-text"
                    >NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW
                    RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW
                    RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW
                    RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW
                    RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE •
                </span>
                <span class="marquee-text"
                    >NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW
                    RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW
                    RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW
                    RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE • NEW
                    RELEASE • NEW RELEASE • NEW RELEASE • NEW RELEASE •
                </span>
            </div>
        </div>

        <!-- Main Content -->
        <main>
            <slot />
        </main>

        <!-- Footer -->
        <footer class="bg-[#151515] border-t border-gray-800 py-12">
            <div class="max-w-7xl mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- TSK Logo and Description -->
                    <div class="space-y-4">
                        <div class="w-24 h-24">
                            <img
                                src={siteAssets.logos.tskMain}
                                alt="TSK Logo"
                                class="w-full h-full object-contain"
                            />
                        </div>
                        <div>
                            <h3 class="text-white font-semibold mb-2">
                                Tehn Sound Kits
                            </h3>
                            <p class="text-gray-400 text-sm leading-relaxed">
                                Tehn Sound Kits provides high-quality sample
                                packs and sound design tools, combining analog
                                warmth with digital precision.
                            </p>
                            <p
                                class="text-gray-400 text-sm leading-relaxed mt-2"
                            >
                                Focused on depth, texture, and sonic character,
                                our collections offer producers and sound
                                designers versatile sounds for experimental
                                electronic music, ambient, and beyond.
                            </p>
                        </div>
                        <button
                            class="bg-purple-600 text-white px-4 py-2 rounded text-sm font-semibold hover:bg-purple-700 transition-colors"
                        >
                            Subscribe
                        </button>
                    </div>

                    <!-- Navigation Links -->
                    <div class="space-y-4">
                        <h4 class="text-white font-semibold">HOME</h4>
                        <ul class="space-y-2 text-gray-400 text-sm">
                            <li>
                                <a
                                    href="/products"
                                    class="hover:text-white transition-colors"
                                    >PRODUCTS</a
                                >
                            </li>
                            <li>
                                <a
                                    href="/popular"
                                    class="hover:text-white transition-colors"
                                    >POPULAR</a
                                >
                            </li>
                            <li>
                                <a
                                    href="/new-releases"
                                    class="hover:text-white transition-colors"
                                    >NEW RELEASES</a
                                >
                            </li>
                            <li>
                                <a
                                    href="/blog"
                                    class="hover:text-white transition-colors"
                                    >BLOG</a
                                >
                            </li>
                            <li>
                                <a
                                    href="/categories"
                                    class="hover:text-white transition-colors"
                                    >CATEGORIES</a
                                >
                            </li>
                            <li>
                                <a
                                    href="/free-kit-300"
                                    class="hover:text-white transition-colors"
                                    >FREE KIT 300+</a
                                >
                            </li>
                            <li>
                                <a
                                    href="/contact"
                                    class="hover:text-white transition-colors"
                                    >CONTACT</a
                                >
                            </li>
                        </ul>
                    </div>

                    <!-- Social Links -->
                    <div class="space-y-4">
                        <h4 class="text-white font-semibold">Connect</h4>
                        <div class="flex space-x-4">
                            <a
                                href="#"
                                class="text-gray-400 hover:text-white transition-colors"
                            >
                                <svg
                                    class="w-6 h-6"
                                    fill="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.095.116.109.219.081.336-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.744-1.378l-.744 2.840c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"
                                    ></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Payment Icons and Copyright -->
                <div
                    class="border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center"
                >
                    <p class="text-gray-400 text-sm">
                        © 2025, TSK Powered by Gumroad
                    </p>
                    <div class="flex space-x-2 mt-4 md:mt-0">
                        <!-- Payment icons would go here -->
                        <div class="flex space-x-2 opacity-60">
                            <div
                                class="w-8 h-5 bg-blue-600 rounded text-xs flex items-center justify-center text-white"
                            >
                                AE
                            </div>
                            <div
                                class="w-8 h-5 bg-[#151515] border rounded text-xs flex items-center justify-center text-white"
                            >
                                AP
                            </div>
                            <div
                                class="w-8 h-5 bg-blue-500 rounded text-xs flex items-center justify-center text-white"
                            >
                                DB
                            </div>
                            <div
                                class="w-8 h-5 bg-orange-600 rounded text-xs flex items-center justify-center text-white"
                            >
                                DC
                            </div>
                            <div
                                class="w-8 h-5 bg-red-600 rounded text-xs flex items-center justify-center text-white"
                            >
                                MC
                            </div>
                            <div
                                class="w-8 h-5 bg-purple-600 rounded text-xs flex items-center justify-center text-white"
                            >
                                SP
                            </div>
                            <div
                                class="w-8 h-5 bg-blue-700 rounded text-xs flex items-center justify-center text-white"
                            >
                                V
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>

        <style>
            .marquee-bar {
                background-color: #151515;
                color: white;
                overflow: hidden;
                position: relative;
                white-space: nowrap;
                width: 100%;
                padding: 10px 0;
                mask-image: linear-gradient(
                    to right,
                    black,
                    black 10%,
                    black 90%,
                    black
                );
                font-family: "Poppins", sans-serif;
            }

            .marquee-content {
                display: flex;
                animation: marquee 40s linear infinite;
            }

            .marquee-text {
                flex-shrink: 0;
                padding-right: 0;
            }

            @keyframes marquee {
                0% {
                    transform: translateX(0%);
                }
                100% {
                    transform: translateX(-50%);
                }
            }

            /* Faster animation for mobile */
            @media (max-width: 768px) {
                .marquee-content {
                    animation: marquee 20s linear infinite;
                }
            }
        </style>
    </body>
</html>
